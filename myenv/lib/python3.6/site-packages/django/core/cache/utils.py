<<<<<<< HEAD
from __future__ import unicode_literals

import hashlib

from django.utils.encoding import force_bytes
from django.utils.http import urlquote
=======
import hashlib
from urllib.parse import quote

from django.utils.encoding import force_bytes
>>>>>>> 37c99181c9a6b95433d60f8c8ef9af5731096435

TEMPLATE_FRAGMENT_KEY_TEMPLATE = 'template.cache.%s.%s'


def make_template_fragment_key(fragment_name, vary_on=None):
    if vary_on is None:
        vary_on = ()
<<<<<<< HEAD
    key = ':'.join(urlquote(var) for var in vary_on)
=======
    key = ':'.join(quote(str(var)) for var in vary_on)
>>>>>>> 37c99181c9a6b95433d60f8c8ef9af5731096435
    args = hashlib.md5(force_bytes(key))
    return TEMPLATE_FRAGMENT_KEY_TEMPLATE % (fragment_name, args.hexdigest())
